(this["webpackJsonpjwt-frontend"]=this["webpackJsonpjwt-frontend"]||[]).push([[0],{52:function(e,a,t){e.exports=t(69)},59:function(e,a,t){},61:function(e,a,t){},69:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(49),s=t.n(l),c=(t(59),t(6)),o=t(8),m=(t(60),t(61),t(77)),i=t(72),u=t(80),d=t(73),E=t(76);const p="https://despliegue-autenticacion.onrender.com";E.a.interceptors.request.use(e=>{const a=localStorage.getItem("token");return a&&(e.headers.Authorization="Bearer "+a),e},e=>Promise.reject(e));var g={register:async e=>{try{const a=await E.a.post(p+"/auth/register",e);return a.data.token&&(localStorage.setItem("token",a.data.token),localStorage.setItem("role",a.data.role)),a.data}catch(a){throw a}},login:async e=>{try{const a=await E.a.post(p+"/auth/login",e);return a.data.token&&(localStorage.setItem("token",a.data.token),localStorage.setItem("role",a.data.role)),a.data}catch(a){throw a}},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("role")},isAuthenticated:()=>null!==localStorage.getItem("token"),getUserRole:()=>localStorage.getItem("role"),getUserProfile:async()=>{try{return(await E.a.get(p+"/user/profile")).data}catch(e){throw e}},getAdminDashboard:async()=>{try{return(await E.a.get(p+"/admin/dashboard")).data}catch(e){throw e}}};var b=()=>{const e=Object(c.n)(),a=g.isAuthenticated(),t=g.getUserRole();return r.a.createElement(m.a,{bg:"dark",variant:"dark",expand:"lg"},r.a.createElement(i.a,null,r.a.createElement(m.a.Brand,{as:o.b,to:"/"},"JWT Auth Demo"),r.a.createElement(m.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(m.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(u.a,{className:"me-auto"},r.a.createElement(u.a.Link,{as:o.b,to:"/"},"Home"),a?r.a.createElement(r.a.Fragment,null,"USER"===t&&r.a.createElement(u.a.Link,{as:o.b,to:"/user/profile"},"Mi Perfil"),"ADMIN"===t&&r.a.createElement(u.a.Link,{as:o.b,to:"/admin/dashboard"},"Panel Admin")):r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a.Link,{as:o.b,to:"/login"},"Login"),r.a.createElement(u.a.Link,{as:o.b,to:"/register"},"Registro"))),a&&r.a.createElement(d.a,{variant:"outline-light",onClick:()=>{g.logout(),e("/login")}},"Cerrar Sesi\xf3n"))))},h=t(74),v=t(51),N=t(79);var f=()=>{const e=g.isAuthenticated(),a=g.getUserRole();return r.a.createElement(i.a,{className:"mt-5"},r.a.createElement(h.a,{className:"justify-content-center"},r.a.createElement(v.a,{md:8},r.a.createElement(N.a,{className:"text-center shadow"},r.a.createElement(N.a.Header,{as:"h2"},"Sistema de Autenticaci\xf3n JWT"),r.a.createElement(N.a.Body,null,r.a.createElement(N.a.Title,null,"Bienvenido a la demostraci\xf3n de JWT"),r.a.createElement(N.a.Text,null,"Esta aplicaci\xf3n demuestra la implementaci\xf3n de autenticaci\xf3n basada en JWT con Spring Boot y React.",e?r.a.createElement("p",{className:"mt-3"},"Est\xe1s autenticado como: ",r.a.createElement("strong",null,a)):r.a.createElement("p",{className:"mt-3"},"Por favor, inicia sesi\xf3n o reg\xedstrate para acceder a las funciones protegidas.")),e?"USER"===a?r.a.createElement(d.a,{as:o.b,to:"/user/profile",variant:"info"},"Ir a Mi Perfil"):r.a.createElement(d.a,{as:o.b,to:"/admin/dashboard",variant:"danger"},"Ir al Panel de Administrador"):r.a.createElement("div",{className:"d-flex justify-content-center gap-2"},r.a.createElement(d.a,{as:o.b,to:"/login",variant:"primary"},"Iniciar Sesi\xf3n"),r.a.createElement(d.a,{as:o.b,to:"/register",variant:"success"},"Registrarse"))),r.a.createElement(N.a.Footer,{className:"text-muted"},"JWT Authentication Demo")))))},y=t(81),S=t(78);var w=()=>{const[e,a]=Object(n.useState)({username:"",password:""}),[t,l]=Object(n.useState)(""),[s,m]=Object(n.useState)(!1),u=Object(c.n)(),E=t=>{const{name:n,value:r}=t.target;a({...e,[n]:r})};return r.a.createElement(i.a,{className:"mt-5"},r.a.createElement(h.a,{className:"justify-content-center"},r.a.createElement(v.a,{md:6},r.a.createElement(N.a,{className:"shadow"},r.a.createElement(N.a.Header,{as:"h3",className:"text-center"},"Iniciar Sesi\xf3n"),r.a.createElement(N.a.Body,null,t&&r.a.createElement(y.a,{variant:"danger"},t),r.a.createElement(S.a,{onSubmit:async a=>{a.preventDefault(),l(""),m(!0);try{const a=await g.login(e);console.log("Login successful:",a),"ADMIN"===a.role?u("/admin/dashboard"):u("/user/profile")}catch(r){var t,n;console.error("Login error:",r),l((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Error al iniciar sesi\xf3n. Comprueba tus credenciales.")}finally{m(!1)}}},r.a.createElement(S.a.Group,{className:"mb-3"},r.a.createElement(S.a.Label,null,"Nombre de usuario"),r.a.createElement(S.a.Control,{type:"text",name:"username",placeholder:"Ingrese su nombre de usuario",value:e.username,onChange:E,required:!0})),r.a.createElement(S.a.Group,{className:"mb-3"},r.a.createElement(S.a.Label,null,"Contrase\xf1a"),r.a.createElement(S.a.Control,{type:"password",name:"password",placeholder:"Ingrese su contrase\xf1a",value:e.password,onChange:E,required:!0})),r.a.createElement("div",{className:"d-grid gap-2"},r.a.createElement(d.a,{variant:"primary",type:"submit",disabled:s},s?"Iniciando sesi\xf3n...":"Iniciar Sesi\xf3n")))),r.a.createElement(N.a.Footer,{className:"text-center"},"\xbfNo tienes cuenta? ",r.a.createElement(o.b,{to:"/register"},"Reg\xedstrate aqu\xed"))))))};var x=()=>{const[e,a]=Object(n.useState)({username:"",password:"",firstname:"",lastname:"",country:"",role:"USER"}),[t,l]=Object(n.useState)(""),[s,m]=Object(n.useState)(!1),u=Object(c.n)(),E=t=>{const{name:n,value:r}=t.target;a({...e,[n]:r})};return r.a.createElement(i.a,{className:"mt-5"},r.a.createElement(h.a,{className:"justify-content-center"},r.a.createElement(v.a,{md:6},r.a.createElement(N.a,{className:"shadow"},r.a.createElement(N.a.Header,{as:"h3",className:"text-center"},"Registrarse"),r.a.createElement(N.a.Body,null,t&&r.a.createElement(y.a,{variant:"danger"},t),r.a.createElement(S.a,{onSubmit:async a=>{a.preventDefault(),l(""),m(!0);try{const a=await g.register(e);console.log("Registration successful:",a),"ADMIN"===a.role?u("/admin/dashboard"):u("/user/profile")}catch(r){var t,n;console.error("Registration error:",r),l((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Error al registrarse. Intente con otro nombre de usuario.")}finally{m(!1)}}},r.a.createElement(S.a.Group,{className:"mb-3"},r.a.createElement(S.a.Label,null,"Nombre de usuario"),r.a.createElement(S.a.Control,{type:"text",name:"username",placeholder:"Elija un nombre de usuario",value:e.username,onChange:E,required:!0})),r.a.createElement(S.a.Group,{className:"mb-3"},r.a.createElement(S.a.Label,null,"Contrase\xf1a"),r.a.createElement(S.a.Control,{type:"password",name:"password",placeholder:"Elija una contrase\xf1a",value:e.password,onChange:E,required:!0})),r.a.createElement(h.a,null,r.a.createElement(v.a,{md:6},r.a.createElement(S.a.Group,{className:"mb-3"},r.a.createElement(S.a.Label,null,"Nombre"),r.a.createElement(S.a.Control,{type:"text",name:"firstname",placeholder:"Ingrese su nombre",value:e.firstname,onChange:E,required:!0}))),r.a.createElement(v.a,{md:6},r.a.createElement(S.a.Group,{className:"mb-3"},r.a.createElement(S.a.Label,null,"Apellido"),r.a.createElement(S.a.Control,{type:"text",name:"lastname",placeholder:"Ingrese su apellido",value:e.lastname,onChange:E,required:!0})))),r.a.createElement(S.a.Group,{className:"mb-3"},r.a.createElement(S.a.Label,null,"Pa\xeds"),r.a.createElement(S.a.Control,{type:"text",name:"country",placeholder:"Ingrese su pa\xeds",value:e.country,onChange:E,required:!0})),r.a.createElement(S.a.Group,{className:"mb-3"},r.a.createElement(S.a.Label,null,"Rol"),r.a.createElement(S.a.Select,{name:"role",value:e.role,onChange:E},r.a.createElement("option",{value:"USER"},"Usuario"),r.a.createElement("option",{value:"ADMIN"},"Administrador")),r.a.createElement(S.a.Text,{className:"text-muted"},"En un entorno real, la asignaci\xf3n de roles deber\xeda ser manejada por administradores.")),r.a.createElement("div",{className:"d-grid gap-2"},r.a.createElement(d.a,{variant:"success",type:"submit",disabled:s},s?"Registrando...":"Registrarse")))),r.a.createElement(N.a.Footer,{className:"text-center"},"\xbfYa tienes cuenta? ",r.a.createElement(o.b,{to:"/login"},"Inicia sesi\xf3n aqu\xed"))))))};var I=()=>{const[e,a]=Object(n.useState)(""),[t,l]=Object(n.useState)(""),[s,c]=Object(n.useState)(!0);return Object(n.useEffect)(()=>{(async()=>{try{const e=await g.getUserProfile();a(e)}catch(e){console.error("Error fetching user profile:",e),l("No se pudo cargar la informaci\xf3n del perfil. Por favor, intente nuevamente.")}finally{c(!1)}})()},[]),s?r.a.createElement(i.a,{className:"mt-5 text-center"},r.a.createElement("p",null,"Cargando perfil de usuario...")):r.a.createElement(i.a,{className:"mt-5"},r.a.createElement(N.a,{className:"shadow"},r.a.createElement(N.a.Header,{as:"h3",className:"text-center"},"Mi Perfil de Usuario"),r.a.createElement(N.a.Body,null,t&&r.a.createElement(y.a,{variant:"danger"},t),!t&&r.a.createElement("div",null,r.a.createElement("p",{className:"lead"},e),r.a.createElement("hr",null),r.a.createElement("p",null,"Este es tu perfil de usuario. Desde aqu\xed podr\xedas:"),r.a.createElement("ul",null,r.a.createElement("li",null,"Ver y editar tu informaci\xf3n personal"),r.a.createElement("li",null,"Cambiar tu contrase\xf1a"),r.a.createElement("li",null,"Gestionar tus preferencias"),r.a.createElement("li",null,"Ver tu historial de actividad")),r.a.createElement("p",{className:"text-muted"},r.a.createElement("small",null,"Estas funcionalidades son ejemplos y no est\xe1n implementadas completamente en este demo.")))),r.a.createElement(N.a.Footer,{className:"text-muted text-center"},"Perfil de Usuario - JWT Auth Demo")))},A=t(75);var j=()=>{const[e,a]=Object(n.useState)(""),[t,l]=Object(n.useState)(""),[s,c]=Object(n.useState)(!0);return Object(n.useEffect)(()=>{(async()=>{try{const e=await g.getAdminDashboard();a(e)}catch(e){console.error("Error fetching admin dashboard:",e),l("No se pudo cargar la informaci\xf3n del panel. Por favor, intente nuevamente.")}finally{c(!1)}})()},[]),s?r.a.createElement(i.a,{className:"mt-5 text-center"},r.a.createElement("p",null,"Cargando panel de administraci\xf3n...")):r.a.createElement(i.a,{className:"mt-5"},r.a.createElement("h2",{className:"mb-4 text-center"},"Panel de Administraci\xf3n"),t&&r.a.createElement(y.a,{variant:"danger"},t),r.a.createElement(h.a,null,r.a.createElement(v.a,{md:12,className:"mb-4"},r.a.createElement(N.a,{className:"shadow"},r.a.createElement(N.a.Header,{as:"h5"},"Mensaje de Bienvenida"),r.a.createElement(N.a.Body,null,r.a.createElement("p",{className:"lead"},e))))),r.a.createElement(h.a,{className:"mb-4"},r.a.createElement(v.a,{md:4},r.a.createElement(N.a,{className:"shadow text-center"},r.a.createElement(N.a.Body,null,r.a.createElement("h3",null,"4"),r.a.createElement("p",null,"Total Usuarios")))),r.a.createElement(v.a,{md:4},r.a.createElement(N.a,{className:"shadow text-center bg-info text-white"},r.a.createElement(N.a.Body,null,r.a.createElement("h3",null,"3"),r.a.createElement("p",null,"Usuarios Activos")))),r.a.createElement(v.a,{md:4},r.a.createElement(N.a,{className:"shadow text-center bg-warning text-white"},r.a.createElement(N.a.Body,null,r.a.createElement("h3",null,"1"),r.a.createElement("p",null,"Administradores"))))),r.a.createElement(N.a,{className:"shadow mb-4"},r.a.createElement(N.a.Header,{as:"h5"},"Lista de Usuarios"),r.a.createElement(N.a.Body,null,r.a.createElement(A.a,{striped:!0,bordered:!0,hover:!0,responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"Usuario"),r.a.createElement("th",null,"Rol"),r.a.createElement("th",null,"\xdaltimo Acceso"))),r.a.createElement("tbody",null,[{id:1,username:"user1",role:"USER",lastLogin:"2025-03-20 14:30"},{id:2,username:"admin1",role:"ADMIN",lastLogin:"2025-03-23 09:15"},{id:3,username:"user2",role:"USER",lastLogin:"2025-03-22 11:45"},{id:4,username:"user3",role:"USER",lastLogin:"2025-03-19 16:20"}].map(e=>r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.id),r.a.createElement("td",null,e.username),r.a.createElement("td",null,r.a.createElement("span",{className:"ADMIN"===e.role?"text-danger":"text-success"},e.role)),r.a.createElement("td",null,e.lastLogin))))),r.a.createElement("p",{className:"text-muted"},r.a.createElement("small",null,"Nota: Esta es una tabla con datos simulados para este demo.")))),r.a.createElement(N.a,{className:"shadow"},r.a.createElement(N.a.Header,{as:"h5"},"Funcionalidades de Administraci\xf3n"),r.a.createElement(N.a.Body,null,r.a.createElement("p",null,"Desde este panel podr\xedas:"),r.a.createElement("ul",null,r.a.createElement("li",null,"Gestionar usuarios (crear, editar, eliminar)"),r.a.createElement("li",null,"Asignar roles y permisos"),r.a.createElement("li",null,"Monitorear la actividad del sistema"),r.a.createElement("li",null,"Configurar par\xe1metros de seguridad")),r.a.createElement("p",{className:"text-muted"},r.a.createElement("small",null,"Estas funcionalidades son ejemplos y no est\xe1n implementadas completamente en este demo."))),r.a.createElement(N.a.Footer,{className:"text-muted text-center"},"Panel de Administrador - JWT Auth Demo")))};const C=e=>{let{element:a,requiredRole:t}=e;const n=g.isAuthenticated(),l=g.getUserRole();return n?t&&l!==t?r.a.createElement(c.a,{to:"/"}):a:r.a.createElement(c.a,{to:"/login"})};var R=function(){return r.a.createElement(o.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(b,null),r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/",element:r.a.createElement(f,null)}),r.a.createElement(c.b,{path:"/login",element:r.a.createElement(w,null)}),r.a.createElement(c.b,{path:"/register",element:r.a.createElement(x,null)}),r.a.createElement(c.b,{path:"/user/profile",element:r.a.createElement(C,{element:r.a.createElement(I,null),requiredRole:"USER"})}),r.a.createElement(c.b,{path:"/admin/dashboard",element:r.a.createElement(C,{element:r.a.createElement(j,null),requiredRole:"ADMIN"})}),r.a.createElement(c.b,{path:"*",element:r.a.createElement(c.a,{to:"/"})}))))};var L=e=>{e&&e instanceof Function&&t.e(3).then(t.bind(null,82)).then(a=>{let{getCLS:t,getFID:n,getFCP:r,getLCP:l,getTTFB:s}=a;t(e),n(e),r(e),l(e),s(e)})};s.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(R,null))),L()}},[[52,1,2]]]);
//# sourceMappingURL=main.33047dab.chunk.js.map